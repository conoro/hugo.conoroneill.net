<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" No-Code Halloween Hacking with Blockly, Espruino, Node-RED and Tines &middot;  Cross Dominant" />
  	<meta property="og:site_name" content="Cross Dominant" />
  	<meta property="og:url" content="https://conoroneill.net/2021/11/01/no-code-halloween-hacking-with-blockly-espruino-node-red-tines/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2021-11-01T05:00:22Z" />

    
    

  <title>
     No-Code Halloween Hacking with Blockly, Espruino, Node-RED and Tines &middot;  Cross Dominant
  </title>

    <meta name="description" content="Mixed laterality since 1968" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://conoroneill.net/favicon.ico">
	  <link rel="apple-touch-icon" href="https://conoroneill.net/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://conoroneill.net/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://conoroneill.net/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
    crossorigin="anonymous">



    
      
          <link href="https://conoroneill.net/index.xml" rel="alternate" type="application/rss+xml" title="Cross Dominant" />
      
      
    
    <meta name="generator" content="Hugo 0.84.4" />

    <link rel="canonical" href="https://conoroneill.net/2021/11/01/no-code-halloween-hacking-with-blockly-espruino-node-red-tines/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-88610-4', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
    </ul>


    
    <a class="subscribe-button icon-feed" href="https://conoroneill.net/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="https://conoroneill.net/"><img src="https://conoroneill.net/images/cross_dominant.png" alt="Home" /></a>
  
  
      <a class="menu-button icon-feed" href="https://conoroneill.net/index.xml">&nbsp;&nbsp;Subscribe</a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">No-Code Halloween Hacking with Blockly, Espruino, Node-RED and Tines</h1>
        <small>Low-Code/No-Code Tools are easily capable of building fun Halloween scare setups and are much more inclusive</small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2021-11-01T05:00:22Z">
            Nov 1, 2021
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      <p>Every Halloween for the past decade or so, I&rsquo;ve built something silly to scare or entertain the trick-or-treaters. Some years it works brilliantly, other years, not so well. But the basic idea is always the same - detect arrival of kids and use sound/light/motion to jump-scare them.</p>
<p>And every Halloween is a last-minute race to assemble electronics, plastic, duct-tape and code. That code is often a horrendous unreliable mish-mash of Arduino, Espruino, Python, Node.js and Bash scripts.</p>
<p>I&rsquo;ve often thought that more people could easily build things like this if the tools were more approachable and inclusive. Hobbyist electronics and IoT often feels like this classic joke:</p>
<p><img src="/images/2021/11/owl.jpg" alt="Owl"></p>
<p>Where our version of that is:</p>
<p><img src="/images/2021/11/red-led.jpg" alt="Red LED"></p>
<p><img src="/images/2021/11/strandbeest.gif" alt="Strandbeest"></p>
<p>So this year, I wondered if it was possible to build something that really worked, but only using No-Code/Low-Code tools for the implementation.</p>
<p>Whilst these tools absolutely don&rsquo;t make it any easier to understand what a TIP120 is or how an ultrasonic sensor works, they remove one huge chunk of required setup/configuration/deployment/expertise. I&rsquo;ll talk more about that in a bit.</p>
<h2 id="so-what-was-the-project-idea">So what was the project idea?</h2>
<ul>
<li>PIR detector at the gate to register when trick-or-treaters are approaching</li>
<li>LED light strip around door which lights up red on approach</li>
<li>Big hidden loudspeaker which blares out something scary</li>
<li>Message via Telegram to tell us they are coming</li>
<li>Log all arrival times in Google Sheets to implement Halloweenalytics</li>
<li>Turn on cheap old smoke machine which fills the hall with smoke before we open the door</li>
</ul>
<h2 id="and-what-was-the-actual-final-setup">And what was the actual final setup?</h2>
<ul>
<li>Ultrasonic detector near door wired to an ESP32 running <a href="http://www.espruino.com/">Espruino</a> sending arrival notifications over Wifi</li>
</ul>
<p><img src="/images/2021/11/photo_ultrasonic.jpg" alt="LEDs"></p>
<ul>
<li>Analogue LED light strip connected to a <a href="https://shop.espruino.com/espruino-boards/pixljs-multicolour">NodeConfEU 2018 badge</a> running Espruino and controllable over Bluetooth</li>
</ul>
<p><img src="/images/2021/11/photo_lights.jpg" alt="LEDs"></p>
<ul>
<li>Raspberry Pi 4 running <a href="https://nodered.org/">Node-RED</a> to accept Ultrasonic Sensor notifications and then
<ul>
<li>Play loud sound through AV port</li>
<li>Trigger <a href="https://tines.com">Tines</a> Webhook</li>
<li>Trigger GPIO pin to a second NodeConfEU 2018 badge running Espruino</li>
</ul>
</li>
</ul>
<p><img src="/images/2021/11/photo_mess.jpg" alt="LEDs"></p>
<ul>
<li>That second NodeConfEU 2018 badge notified the first one over Bluetooth to turn on the LED lights for 60 seconds</li>
<li>It also controlled a cheap hobbyist servo taped to the on-off switch of the smoke machine to turn it on for 20 seconds</li>
</ul>
<p><img src="/images/2021/11/photo_servo.jpg" alt="LEDs"></p>
<ul>
<li>When the webhook was triggered, Tines would then save a timestamp to Google Sheets and sent a message via a Telegram Bot which I received on my phone</li>
</ul>
<p><img src="/images/2021/11/telegram_halloween.jpg" alt="Telegram"></p>
<p><img src="/images/2021/11/gsheets_halloween.png" alt="GSHeets"></p>
<h2 id="hardware">Hardware</h2>
<p>I&rsquo;ve just realised that there was almost no extra &ldquo;electronics&rdquo; required to implement this project. Apart from the boards themselves, standard household items like speakers and extension cables and various powerbanks and power supplies, I had:</p>
<ul>
<li>A TIP120 to connect the Espruino board to the LED Strip</li>
<li>The HC-SRO4P ultrasonic sensor</li>
<li>A generic low-power hobbyist servo motor</li>
<li>A few wires to connect things together</li>
</ul>
<h2 id="show-me-the-code">Show me the code</h2>
<p>But here&rsquo;s the even cooler thing. I only had to write a single line of &ldquo;traditional&rdquo; code to make all of this work. All of the Espruino code was done using Blockly with the exception of the one HTTP request to Node-RED as there isn&rsquo;t an Espruino Blockly block for that.</p>
<ul>
<li>Here&rsquo;s the LED light code:</li>
</ul>
<p><img src="/images/2021/11/leds_on_off.png" alt="LED Light Code"></p>
<ul>
<li>Here&rsquo;s the Smoke Machine code and remote LED light trigger:</li>
</ul>
<p><img src="/images/2021/11/espruino_smoke_and_lights_blockly.png" alt="Smoke Machine Code"></p>
<ul>
<li>Here&rsquo;s the Ultrasonic sensor code (only complexity is making sure to not send an excess of notifications):</li>
</ul>
<p><img src="/images/2021/11/ultrasonic_blockly.png" alt="Ultrasonic Code"></p>
<ul>
<li>Here&rsquo;s the Node-RED code:</li>
</ul>
<p><img src="/images/2021/11/node_red_halloween.png" alt="Node-RED Code"></p>
<ul>
<li>And finally here&rsquo;s the Tines code:</li>
</ul>
<p><img src="/images/2021/11/tines_halloween_story.png" alt="Tines Code"></p>
<h2 id="how-well-did-it-work">How well did it work?</h2>
<p>See for yourself:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/i8a4AJPny50" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Â </p>
<h2 id="challenges">Challenges</h2>
<ul>
<li>Cheap PIR sensors are awful. Completely inconsistent and totally useless outdoors</li>
<li>Cheap ultrasonic sensors are pretty good. Unless it rains, which it did.</li>
<li>Bluetooth for time-sensitive reliable communications remains problematic and is too hard to understand for most people</li>
<li>Internet access using Espruino Blockly on devices like the ESP32 can be patchy due to a (completely understandable) lack of official support</li>
<li>Ditto using an ESP-01 on a NodeConfEU 2018 badge - I wasn&rsquo;t able to get this working in Blockly</li>
<li>Node-RED is not pre-installed on Raspberry Pis but it should be. Installing is very easy tho.</li>
<li>Authentication/Authorisation for hobbyist stuff on the internet remains a huge hurdle. It should not be that hard to access one Google Sheet.</li>
<li><a href="http://app.edublocks.org/">Edublocks</a> has a lot of potential as a Python alternative to Blockly but it currently seems more for classroom experimentation rather than deploying and running code somewhere. I made some progress with it but dropped it in favour of Blockly for this project.</li>
</ul>
<h2 id="wins">Wins</h2>
<h3 id="espruino">Espruino</h3>
<p>Espruino + Blockly + Save-To-Flash is an incredibly powerful and easy way to have code in production in minutes that you can power-cycle.</p>
<h3 id="node-red">Node-RED</h3>
<p>Node-RED, whilst a bit scary initially, is crazily powerful and again enables you to have code in production that you can power-cycle.</p>
<h3 id="tines">Tines</h3>
<p><a href="https://tines.com">Tines</a> (disclosure: I work for them) makes it ridiculously easy to orchestrate and automate things. Whilst my use-case was pretty trivial, I love how easy it is to tie lots of data and event sources together and emit new data and events. For personal projects, I&rsquo;ll be doing lots more around <a href="https://conoroneill.net/2021/09/20/using-tines-for-home-iot-automation/">Telegram bots</a> and data persistence. The fact that <a href="https://www.tines.com/community-edition-signup?utm_campaign=iot&amp;utm_medium=blog&amp;utm_source=conor">Community Edition</a> has all the features I need and is always free, is a big bonus.</p>
<h3 id="telegram">Telegram</h3>
<p>Telegram seems to be the only messaging app that welcomes Bots and integrations and has done it extremely well.</p>
<h2 id="final-thoughts">Final thoughts</h2>
<p>No-Code tools don&rsquo;t imply no-tech. Whatever the vertical, you still need to learn how the technology there works. And in this area there is no getting away from having to learn how various electronic modules are wired up. You may have to install tools or look at the JSON coming back from an API or figure out a simple regex or follow the steps to enable Google Auth.</p>
<p>But what you don&rsquo;t have to do is worry about the nuances of Arduino vs C++ vs Python vs JavaScript vs Go vs Assembly or how to build/compile/deploy your code or use each MCU vendor&rsquo;s SDK. And that&rsquo;s a massive gain for so many people.</p>
<p>I love the idea of being able to hand someone, who is new to hobbyist electronics/IoT, an Espruino device or a micro:bit or a Raspberry Pi Zero along with a few components/wires and know that they could have something far more complex than a blinking LED working in a Low-Code tool the same day.</p>
<p>But we&rsquo;re not fully there yet. Espruino+Blockly and Edublocks still feel too much like &ldquo;coding&rdquo; and they lack a rich ecosystem of community blocks. Bluetooth and Wifi are still a pain in the butt and I wonder if a big push for LoRa is needed. Or some other simple supported protocol to get lightweight data from cheap device to cheap device without ever having to think about the implementation details. We live in a connected world. Flashing an LED doesn&rsquo;t cut it any more. Flashing an LED remotely in your friend&rsquo;s house by dragging-and-dropping some blocks, well that&rsquo;s another thing altogether!</p>
<p>Companies like Adafruit, Sparkfun and Pimoroni have done wonderful work with Open Source Hardware and Software. Adafruit is also leading the charge with software like CircuitPython. It&rsquo;d be amazing if some common Low-Code/No-Code standard could be created that meant every new hardware module that these companies release had a &ldquo;Block&rdquo; available to use in these environments. Even if that means one LCNC tool has to become the winner.</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://conoroneill.net/" style="background-image: url(https://conoroneill.net/images/cross_dominant.png)"><span class="hidden">Conor O&#39;Neill's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="https://conoroneill.net/">Conor O&#39;Neill</a></h4>
  
  <p>Tech guy who likes running slowly</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Bandon, Cork, Ireland</span>
    <span class="author-link icon-link"><a href="https://conoroneill.net">https://conoroneill.net</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=No-Code%20Halloween%20Hacking%20with%20Blockly%2c%20Espruino%2c%20Node-RED%20and%20Tines&amp;url=https%3a%2f%2fconoroneill.net%2f2021%2f11%2f01%2fno-code-halloween-hacking-with-blockly-espruino-node-red-tines%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fconoroneill.net%2f2021%2f11%2f01%2fno-code-halloween-hacking-with-blockly-espruino-node-red-tines%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fconoroneill.net%2f2021%2f11%2f01%2fno-code-halloween-hacking-with-blockly-espruino-node-red-tines%2f&amp;description=No-Code%20Halloween%20Hacking%20with%20Blockly%2c%20Espruino%2c%20Node-RED%20and%20Tines"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fconoroneill.net%2f2021%2f11%2f01%2fno-code-halloween-hacking-with-blockly-espruino-node-red-tines%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'crossdominant';
  var disqus_url = 'https:\/\/conoroneill.net\/2021\/11\/01\/no-code-halloween-hacking-with-blockly-espruino-node-red-tines\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Cross Dominant</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://conoroneill.net/js/jquery.js"></script>
    <script type="text/javascript" src="https://conoroneill.net/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://conoroneill.net/js/index.js"></script>
    
</body>
</html>

