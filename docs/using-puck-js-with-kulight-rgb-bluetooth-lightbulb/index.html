<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Puck.js with the Kulight RGB Bluetooth Lightbulb &middot; Cross Dominant</title>

    <meta name="description" content="You can have huge fun wit Puck.js. Here are the settings for talking to a cheap Bluetooth lightbulb">

    <meta name="generator" content="Hugo 0.20.6" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Using Puck.js with the Kulight RGB Bluetooth Lightbulb &middot; Cross Dominant">
    <meta name="twitter:description" content="You can have huge fun wit Puck.js. Here are the settings for talking to a cheap Bluetooth lightbulb">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Using Puck.js with the Kulight RGB Bluetooth Lightbulb &middot; Cross Dominant">
    <meta property="og:description" content="You can have huge fun wit Puck.js. Here are the settings for talking to a cheap Bluetooth lightbulb">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="https://conoroneill.net/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Cross Dominant" href="" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://conoroneill.net/">Cross Dominant</a></h1>
            <h2 class="brand-tagline"> Mixed laterality since 1968 </h2>
        </hgroup>			
        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/conoro"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/conoro "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://conoroneill.net/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>
		<script>
  (function() {
    var cx = '001461447920948202874:5htheqgvd1w';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">20 Aug 2017, 18:11</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://conoroneill.net/using-puck-js-with-kulight-rgb-bluetooth-lightbulb/" class="post-title">Using Puck.js with the Kulight RGB Bluetooth Lightbulb</a>

                        <p class="post-meta">
                            
                            
                                under 
                                
                                
                            
                        </p>
                    </header>

                    <div class="post-share">
                        <div class="post-share-links">
                            <h4 style="">Share</h4>
                            <a href="#" data-type="facebook" data-url="https://conoroneill.net/using-puck-js-with-kulight-rgb-bluetooth-lightbulb/" data-title="Using Puck.js with the Kulight RGB Bluetooth Lightbulb" data-description="You can have huge fun wit Puck.js. Here are the settings for talking to a cheap Bluetooth lightbulb" data-media="" class="prettySocial fa fa-facebook"></a>
                            <a href="#" data-type="googleplus" data-url="https://conoroneill.net/using-puck-js-with-kulight-rgb-bluetooth-lightbulb/" data-description="You can have huge fun wit Puck.js. Here are the settings for talking to a cheap Bluetooth lightbulb" class="prettySocial fa fa-google-plus"></a>
                            
                            
                        </div>
                    </div>
                    <div class="post-description">
                        <p>I have a massive backlog of tech posts to do but I never quite finish the projects to the level I want and they are left hanging. So I&rsquo;m going to start posting more WIP stuff from now on and hopefully they&rsquo;ll be useful to someone.</p>

<p>I&rsquo;ve been a long-time fan of the <a href="https://www.espruino.com">Espruino project</a> created by Gordon Willams and have had great fun with the <a href="https://www.espruino.com/Order">original board</a>, the <a href="https://www.espruino.com/Order">Pico</a> and <a href="https://www.espruino.com/Order">Puck.js</a>. If you like JavaScript and you&rsquo;d like to play around with hardware, you really should get your hands on one of his boards.</p>

<p><a href="https://www.espruino.com/Puck.js">Puck.js</a> is a tiny button-cell-battery-powered Bluetooth board. You program it using a Chrome Web App over Bluetooth (or standalone Electron-based IDE on Windows. Glares at Google) and it&rsquo;ll put a smile on your face every time you do. You can use it as an iBeacon or Eddystone device or as a Bluetooth button for your computer. Basically anything with Bluetooth (BLE) is up for grabs.</p>

<p><img src="/img/2017/08/Puck.js_board.jpg" alt="Puck.js" /></p>

<p>Gordon did a really nice <a href="https://www.youtube.com/watch?v=LCvmmpQjnj0">demo video</a> of <a href="https://www.espruino.com/Puck.js+and+Bluetooth+Lightbulbs">how to control a Bluetooth lightbulb</a> late last year.</p>

<p>I finally ordered a <a href="http://www.ebay.co.uk/itm/332254514323">random one off eBay</a> recently and decided to follow his steps. As it&rsquo;s a different bulb, the settings are very different. So if you find yourself with a KuLight like this,</p>

<p><img src="/img/2017/08/kulight.png" alt="KuLight" /></p>

<p>which uses the <a href="https://play.google.com/store/apps/details?id=com.cloudlink.bleled&amp;hl=en">ColorfulLight App</a> on iOS/Android then these are the basic settings you need, based on Gordon&rsquo;s code:</p>

<pre><code>/*
On     = 0x02, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Off    = 0x32, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Red    = 0x02, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
Orange = 0x02, 0xff, 0x9c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Yellow = 0x02, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Green  = 0x02, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Cyan   = 0x02, 0x00, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Blue   = 0x02, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
Pink   = 0x02, 0xff, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

*/


function setLight(isOn) {
  var gatt;
  NRF.connect(&quot;e1:fb:c1:6b:81:6f random&quot;).then(function(g) {
    console.log(&quot;Connected&quot;);
    gatt = g;
    return gatt.getPrimaryService(&quot;8d96a001-0002-64c2-0001-9acc4838521c&quot;);
  }).then(function(service) {
    return service.getCharacteristic(&quot;8d96b002-0002-64c2-0001-9acc4838521c&quot;);
  }).then(function(characteristic) {
    if (isOn){
      return characteristic.writeValue([ 0x02, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]);
    } else {
      return characteristic.writeValue([ 0x32, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]);
  }
  }).then(function() {
    gatt.disconnect();
    console.log(&quot;Done!&quot;);
  });
}

var on = true;
setWatch(function() {
  on = !on;
  setLight(on);
}, BTN, { repeat:true, edge:&quot;rising&quot;, debounce:50 });


</code></pre>

<p>Note the code lacks error handling so e.g. if Mobile App is already connected, the Puck will throw an exception trying to connect. And obvs the MAC address will probably be different for your light.</p>

<p>More Puck.js posts coming soon!</p>

                    </div>
                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'crossdominant';
    var disqus_identifier = 'https:\/\/conoroneill.net\/using-puck-js-with-kulight-rgb-bluetooth-lightbulb\/';
    var disqus_title = 'Using Puck.js with the Kulight RGB Bluetooth Lightbulb';
    var disqus_url = 'https:\/\/conoroneill.net\/using-puck-js-with-kulight-rgb-bluetooth-lightbulb\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </section>
            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a>. Copyright Conor O'Neill 2010</li>
        </ul>
    </div>
</div>
<script src="https://conoroneill.net/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-88610-4', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
